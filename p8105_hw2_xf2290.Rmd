---
title: "p8105_hw2_xf2290"
author: "Xiwei Fu"
date: "2025-10-01"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


Probelm 1
```{r}
library(tidyverse)
#relative paths
pols <- read_csv("pols-month.csv")
snp <- read_csv("snp.csv")
unemp <- read_csv("unemployment.csv")
```
Clean pols
```{r}
pols_clean <- pols %>% #new set
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) %>%
  mutate(
    month = month.name[month],  # replace it with month name
    president = if_else(prez_gop == 1, "gop", "dem")
  ) %>%
  select(-prez_gop, -prez_dem, -day) %>%
  arrange(year, month)
```
Clean snp
```{R}
snp_clean <- snp %>%
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) %>%
  mutate(
    # Convert 2-digit year into 4-digit
    year = if_else(year < 50, year + 2000, year + 1900),
    month = month.name[month] 
  ) %>%
  select(year, month, close) %>%
  arrange(year, month)
```
Clean unemp
```{R}
unemp_clean <- unemp %>%
  pivot_longer(cols = Jan:Dec, names_to = "month", values_to = "unemployment") %>%
  mutate(
    month = case_when(
      month == "Jan" ~ "January",
      month == "Feb" ~ "February",
      month == "Mar" ~ "March",
      month == "Apr" ~ "April",
      month == "May" ~ "May",
      month == "Jun" ~ "June",
      month == "Jul" ~ "July",
      month == "Aug" ~ "August",
      month == "Sep" ~ "September",
      month == "Oct" ~ "October",
      month == "Nov" ~ "November",
      month == "Dec" ~ "December"
    )
  ) %>%
  rename(year = Year) %>%
  arrange(year, month)
```
Mere datasets
```{R}
merged_data1 <- left_join(pols_clean, snp_clean, by = c("year", "month"))

final_data <- left_join(merged_data1, unemp_clean, by = c("year", "month"))
```

The pols-month dataset contained monthly counts of political leaders, including indicators of whether the president was Republican or Democrat, as well as the number of governors, senators, and representatives by party. The snp dataset tracked the Standard & Poor’s stock market index through its monthly closing values, reflecting broader economic conditions. The unemployment dataset provided monthly unemployment percentages for each year. After cleaning and merging, the resulting dataset (final_data) contains 822 observations and 11 variables, covering a wide range of years. Key variables include year, month, president (party of the sitting president), counts of Democratic and Republican officeholders (gov_gop, sen_gop, rep_gop, etc.), the S&P index closing value (close), and the monthly unemployment rate (unemployment).

Problem 2
```{R}
library(tidyverse)
library(readxl)
mr_trash <- read_excel("202409 Trash Wheel Collection Data.xlsx",
                       sheet = "Mr. Trash Wheel",
                       skip = 1) %>%   # skips metadata row
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%       # keep only actual dumpster rows
  mutate(
    sports_balls = as.integer(round(sports_balls, 0)),
    year = as.integer(year),
    wheel = "Mr. Trash Wheel"        # add identifier
  )
```
```{R}
prof_trash <- read_excel("202409 Trash Wheel Collection Data.xlsx",
                         sheet = "Professor Trash Wheel",
                         skip = 1) %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    year = as.integer(year),
    wheel = "Professor Trash Wheel"
  )
```

```{R}
gwy_trash <- read_excel("202409 Trash Wheel Collection Data.xlsx",
                      sheet = "Gwynnda Trash Wheel",
                      skip = 1) %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    year = as.integer(year),
    wheel = "Gwynnda Trash Wheel"
  )
```
```{R}
trash_wheels <- bind_rows(mr_trash, prof_trash, gwy_trash)
```

The combined Trash Wheel dataset brings together information from Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda, giving a unified record of litter collection in Baltimore’s waterways. After cleaning and merging, the dataset contains r nrow(trash_wheels) observations and r ncol(trash_wheels) variables, with each row corresponding to a dumpster load of trash. Key variables include dumpster (the load identifier), date, year, weight_tons (the total weight of trash collected), and item-specific counts such as plastic_bottles, cigarette_butts, and sports_balls. For the available data, Professor Trash Wheel collected a total of r sum(trash_wheels$weight_tons[trash_wheels$wheel == "Professor Trash Wheel"], na.rm = TRUE) tons of trash. Looking at Gwynnda specifically, in June 2022 she collected r sum(trash_wheels$cigarette_butts[trash_wheels$wheel == "Gwynnda" & trash_wheels$year == 2022 & lubridate::month(trash_wheels$date) == 6], na.rm = TRUE) cigarette butts. This illustrates how the dataset allows us to compare contributions across the different Trash Wheels and explore patterns in the types of waste collected.