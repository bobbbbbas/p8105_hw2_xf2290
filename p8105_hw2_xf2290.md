p8105_hw2_xf2290
================
Xiwei Fu
2025-10-01

Probelm 1

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
#relative paths
pols <- read_csv("pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp <- read_csv("snp.csv")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemp <- read_csv("unemployment.csv")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Clean pols

``` r
pols_clean <- pols %>% #new set
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) %>%
  mutate(
    month = month.name[month],  # replace it with month name
    president = if_else(prez_gop == 1, "gop", "dem")
  ) %>%
  select(-prez_gop, -prez_dem, -day) %>%
  arrange(year, month)
```

Clean snp

``` r
snp_clean <- snp %>%
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) %>%
  mutate(
    # Convert 2-digit year into 4-digit
    year = if_else(year < 50, year + 2000, year + 1900),
    month = month.name[month] 
  ) %>%
  select(year, month, close) %>%
  arrange(year, month)
```

Clean unemp

``` r
unemp_clean <- unemp %>%
  pivot_longer(cols = Jan:Dec, names_to = "month", values_to = "unemployment") %>%
  mutate(
    month = case_when(
      month == "Jan" ~ "January",
      month == "Feb" ~ "February",
      month == "Mar" ~ "March",
      month == "Apr" ~ "April",
      month == "May" ~ "May",
      month == "Jun" ~ "June",
      month == "Jul" ~ "July",
      month == "Aug" ~ "August",
      month == "Sep" ~ "September",
      month == "Oct" ~ "October",
      month == "Nov" ~ "November",
      month == "Dec" ~ "December"
    )
  ) %>%
  rename(year = Year) %>%
  arrange(year, month)
```

Mere datasets

``` r
merged_data1 <- left_join(pols_clean, snp_clean, by = c("year", "month"))

final_data <- left_join(merged_data1, unemp_clean, by = c("year", "month"))
```

The pols-month dataset contained monthly counts of political leaders,
including indicators of whether the president was Republican or
Democrat, as well as the number of governors, senators, and
representatives by party. The snp dataset tracked the Standard & Poor’s
stock market index through its monthly closing values, reflecting
broader economic conditions. The unemployment dataset provided monthly
unemployment percentages for each year. After cleaning and merging, the
resulting dataset (final_data) contains 822 observations and 11
variables, covering a wide range of years. Key variables include year,
month, president (party of the sitting president), counts of Democratic
and Republican officeholders (gov_gop, sen_gop, rep_gop, etc.), the S&P
index closing value (close), and the monthly unemployment rate
(unemployment).
